
model Infusion {
  infusionId Int    @id @default(autoincrement()) @map("infusion_id")
  name       String @db.VarChar(120)
  engName    String @unique @map("eng_name") @db.VarChar(120)

  minArtificerLevel  Int                @default(1) @map("min_artificer_level")
  targetType         InfusionTargetType @map("target_type")
  requiresAttunement Boolean            @default(false) @map("requires_attunement")

  // Explicit effect fields (без JSON)
  bonusToAC                  Int?    @map("bonus_to_ac")
  bonusToAttackRoll          Int?    @map("bonus_to_attack_roll")
  bonusToDamage              Int?    @map("bonus_to_damage")
  spellAttackBonus           Int?    @map("spell_attack_bonus")
  speedBonus                 Int?    @map("speed_bonus")
  charges                    Int?    @map("charges")
  rechargeDice               String? @map("recharge_dice")
  restoresSpellSlotUpToLevel Int?    @map("restores_spell_slot_upto_level")

  // Scaling (+2 at level 10 for some infusions)
  increasesAtLevel10By Int? @map("increases_at_level10_by")

  // Replicate Magic Item
  replicatedMagicItemId Int?       @map("replicated_magic_item_id")
  replicatedMagicItem   MagicItem? @relation(fields: [replicatedMagicItemId], references: [magicItemId])

  // Special flags
  createsHomunculus Boolean? @map("creates_homunculus")

  // Link to Feature for static description
  featureId Int?     @map("feature_id")
  feature   Feature? @relation(fields: [featureId], references: [featureId], onDelete: Cascade)

  persInfusions PersInfusion[]

  @@map("infusion")
}
